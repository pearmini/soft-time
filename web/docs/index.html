<!DOCTYPE html>
<notebook theme="near-midnight">
  <title>Soft Time</title>
  <script type="text/markdown">
    <style>
      html {
        background-color: #000;
      }
      #cell-4 {
        display: flex;
        flex-direction: column;
        margin-top: 120px;
        justify-content: center;
        align-items: center;
      }
    
      #cell-4 form {
        width: 400px !important;
        margin-bottom: 20px;
      }
    </style>
  </script>
  <script type="module">
    import * as d3 from "d3";
    import {render} from "./render.js";
    const seed = 20;
    const size = 300;
    const count = 5;
    const T = d3.range(count).map((i) => i / (count - 1));
    const values = (count, start = 0, end = 1) => d3.range(count).map((i) => start + ((end - start) * i) / (count - 1));
    const reverse = (fn) => (t) => fn(1 - t);
  </script>
  <script type="module">
    const inferno = values(count, 0.3, 1).map(d3.interpolateInferno);
    const virdis = values(count, 0.1, 1).map(d3.interpolateViridis);
    const cubehelix = values(count, 0.25, 0.8).map(d3.interpolateCubehelixDefault);
    const rurd = values(count, 0.2, 1).map(reverse(d3.interpolatePuRd));
    const pubugn = values(count, 0.1, 1).map(d3.interpolatePlasma);
    const ylorrd = values(count, 0, 1).map(reverse(d3.interpolateYlOrRd));
    {
      const timezones = [
        {tz: "UTC", name: "UTC", colors: ylorrd},
        {tz: "GMT", name: "GMT", colors: inferno},
        {tz: "America/New_York", name: "EST", colors: virdis},
        {tz: "America/Los_Angeles", name: "PST", colors: cubehelix},
        {tz: "Europe/Paris", name: "CET", colors: pubugn},
        {tz: "Asia/Shanghai", name: "CST", colors: rurd},
      ];
      const nodes = timezones.map(({tz, name, colors}) =>
        render({
          size,
          seed: Math.random() * 1000,
          count,
          colors,
          timezone: tz,
          timezoneName: name,
          showTime: time,
          scheme: scheme,
          background: "black",
        })
      );
      nodes.forEach(display);
    }
  </script>
  <script type="module">
    const scheme = view(Inputs.radio(["Gradient", "Solid", "None"], {label: "Fill Type", value: "Gradient"}));
    const theme = view(Inputs.radio(["Dark", "Light"], {label: "Color Theme", value: "Dark"}));
    const time = view(Inputs.toggle({label: "Display Time", value: true}));
  </script>
  <script type="module">
    if (theme === "Light") window.location.href = "/light";
  </script>
</notebook>
